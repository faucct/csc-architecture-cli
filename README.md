[![Build Status](https://travis-ci.org/faucct/csc-architecture-cli.svg?branch=master)](https://travis-ci.org/faucct/csc-architecture-cli)
# CLI
## Модели
### Сессия
* текущая директория
* словарь окружения
* кэш путей к внешним программам.
### Интерфейс команды
Вызов с переданными сессией, вводом и выводом, возвращающий код возврата.

### Реализации команд
* присваивание переменной окружения
* пайп из двух команд
* встроенные команды (echo, pwd, wc) + строковые аргументы
* внешний вызов + строковые аргументы

## Флоу
Сначала инициализируется сессия текущей рабочей директорией и словарём окружения.

Затем в main-loop происходит разбор базовой структуры команд, разделяемых переносами строк.
На этом этапе уже различаются:
* отдельные команды
* присваивания переменных
* кавычки
* пайпы
* интерполяция (пока не выполненная)

Далее по очереди к каждой команде применяется интерполяция переменных окружения и она выполняется.

В случае конвеера команд обработка данных идёт синхронно, без буфферизации.

Каждой команде доступен словарь окружения, в том числе и для его изменения.
